{% extends "base.html" %}
{% block content %}
<h1 class="mb-4">æ¼è›‹æ¯”èµ›è®¡åˆ†æ¿</h1>
<div class="mb-3">
    <a href="{{ url_for('create_match') }}" class="btn btn-primary">åˆ›å»ºæ–°æ¯”èµ›</a>
    <a href="{{ url_for('annual_report') }}" class="btn btn-warning">ğŸ“Š å¹´åº¦æ€»ç»“æŠ¥å‘Š</a>
</div>
<h2 class="mt-4">æ¯”èµ›åˆ—è¡¨</h2>
<ul class="list-group mb-4">
    {% for match in matches %}
        <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
            <div class="col-12 col-md-8 mb-2 mb-md-0">
                <a href="{{ url_for('match_detail', match_id=match.id) }}" class="text-decoration-none">
                    [{{ loop.index }}] {{ match.time.strftime('%Y-%m-%d %H:%M') }} - {{ match.location }}
                </a>
                {% if match.status == 'ongoing' %}
                    <span class="badge bg-primary ms-2">è¿›è¡Œä¸­</span>
                {% else %}
                    <span class="badge bg-success ms-2">å·²ç»“æŸ</span>
                {% endif %}
            </div>
            {% if match.status == 'ongoing' %}
            <form action="{{ url_for('delete_match', match_id=match.id) }}" method="POST" class="d-inline col-12 col-md-4 text-md-end">
                <button type="submit" class="btn btn-danger btn-sm" 
                        onclick="return confirm('ç¡®å®šè¦åˆ é™¤è¿™åœºæ¯”èµ›å—ï¼Ÿ');">åˆ é™¤</button>
            </form>
            {% endif %}
        </li>
    {% endfor %}
</ul>

<h2 class="mt-4">é€‰æ‰‹æ€»åˆ†æ’è¡Œæ¦œ</h2>
{% if score_rankings %}
<table class="table table-striped table-responsive">
    <thead>
        <tr>
            <th>æ’å</th>
            <th>é€‰æ‰‹å§“å</th>
            <th>æ€»ç§¯åˆ†</th>
        </tr>
    </thead>
    <tbody>
        {% for rank, name, score in score_rankings %}
        <tr>
            <td>{{ rank }}</td>
            <td>{{ name }}</td>
            <td>{{ score }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<p class="text-muted">æš‚æ— é€‰æ‰‹æ•°æ®ï¼Œè¯·å…ˆåˆ›å»ºæ¯”èµ›å¹¶å½•å…¥æˆç»©ã€‚</p>
{% endif %}

<h2 class="mt-4">é€‰æ‰‹èƒœç‡æ’è¡Œæ¦œ</h2>
{% if win_rate_rankings %}
<table class="table table-striped table-responsive">
    <thead>
        <tr>
            <th>æ’å</th>
            <th>é€‰æ‰‹å§“å</th>
            <th>å‚èµ›åœºæ¬¡</th>
            <th>èƒœåˆ©åœºæ¬¡</th>
            <th>èƒœç‡</th>
        </tr>
    </thead>
    <tbody>
        {% for rank, name, matches, wins, win_rate in win_rate_rankings %}
        <tr>
            <td>{{ rank }}</td>
            <td>{{ name }}</td>
            <td>{{ matches }}</td>
            <td>{{ wins }}</td>
            <td>{{ win_rate }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<p class="text-muted">æš‚æ— èƒœç‡æ•°æ®ï¼Œè¯·å…ˆç»“æŸä¸€äº›æ¯”èµ›ã€‚</p>
{% endif %}
{% endblock %}